{"version":3,"sources":["app.coffee"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["\nmainApp = angular.module 'mainApp', [\n    'mainControllers'\n]\n\nmainApp.config ['$httpProvider', ($httpProvider) ->\n    $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest'\n    return\n]\n\n#-----------------------------\n# mainControllers\n#-----------------------------\n\nmainControllers = angular.module 'mainControllers', []\n\nmainControllers.controller 'SheetsController', ($scope, $http, $log) ->\n    # ユーザ一覧取得\n    $scope.loadSheets = ->\n        $http.get \"/api/sheet\",\n            cache: false\n            headers:\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        .success (json) ->\n            $scope.sheets = json\n        .error networkError\n        return\n    $scope.loadSheets()\n\n    $scope.sheet =\n        title: ''\n        text: ''\n    $scope.add = () ->\n        $scope.sheet =\n            id: null\n            title: ''\n            text: ''\n        return\n    $scope.edit = (sheet) ->\n        $scope.sheet =\n            id: sheet.id\n            title: sheet.title\n            text: sheet.text\n        return\n\n    $scope.remove = (sheet) ->\n        if confirm('本当に削除しますか\\n' + sheet.title)\n            $http\n                method: 'delete'\n                url: '/api/sheet/' + sheet.id\n            .success (json) ->\n                $scope.loadSheets()\n                alert '削除しました'\n            .error networkError\n        return false\n\n    $scope.save = ->\n        method = 'post'\n        url = '/api/sheet'\n        if $scope.sheet.id\n            method = 'put'\n            url += '/' + $scope.sheet.id\n        $http\n            method: method\n            url: url\n            data: $scope.sheet\n            headers:\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        .success (json) ->\n            # $log.info(json)\n            $scope.sheet = json\n            $scope.loadSheets()\n        .error networkError\n        return false\n    return\n\n#-----------------------------\n# utils\n#-----------------------------\n\nshowMessage = (type, message, autoclose=true) ->\n    $('#message .alert').addClass('alert-'+type).empty().append(message)\n    $('#message').removeClass('hidden').show 'fade'\n    if autoclose\n        setTimeout ->\n            $('#message').hide 'fade', ->\n                $('#message .alert').removeClass('alert-'+type)\n        , 2000\nshowSuccessMessage = (message) ->\n    showMessage 'success', message\nshowErrorMessage = (message) ->\n    showMessage 'danger', message\n\nnetworkError = (json, status) ->\n  if status != 401\n    showErrorMessage json.message\n  else\n    location.href = '/'\n"],"sourceRoot":"/source/"}